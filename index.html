<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Face The Music</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"
      defer
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"
      defer
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js"
      defer
    ></script>
    <script type="module" src="src/main.js" defer></script>
  </head>
  <body>
    <div id="app">
      <header class="panel">
        <h1>Face The Music</h1>
        <p class="tagline">
          Bounce to the beat with nothing but your facial expressions.
        </p>
      </header>
      <main>
        <section class="game-wrapper">
          <div class="canvas-container">
            <canvas id="game-canvas"></canvas>
            <div class="status-overlay" id="status-overlay">
              <div class="message" id="status-message">Hold tightâ€¦</div>
              <button class="primary" id="start-button">Start Game</button>
              <button class="secondary" id="calibrate-button">Recalibrate</button>
            </div>
            <div class="hud">
              <div class="hud-item">
                <span class="label">Score</span>
                <span class="value" id="score-value">0</span>
              </div>
              <div class="hud-item">
                <span class="label">Streak</span>
                <span class="value" id="streak-value">0</span>
              </div>
              <div class="hud-item">
                <span class="label">Mode</span>
                <span class="value" id="input-mode">Face</span>
              </div>
            </div>
          </div>
          <aside class="instructions panel">
            <h2>How to play</h2>
            <ol>
              <li>
                Allow camera access and gently move your head left/right and up/down when asked to calibrate.
              </li>
              <li>
                When the beat starts, move your face to align the glowing orb with each platform.
              </li>
              <li>
                Keep the rhythm to climb your streak! Miss a platform and the song stops.
              </li>
            </ol>
            <p class="hint">
              Keyboard fallback: use <kbd>A</kbd>/<kbd>D</kbd> (or arrows) to move sideways and <kbd>W</kbd>/<kbd>S</kbd> for height.
              Press <kbd>R</kbd> anytime to recalibrate.
            </p>
          </aside>
        </section>
      </main>
      <footer class="panel">
        <p>
          Audio not playing? Place your track at <code>track.mp3</code> in this directory or update the source in the HTML.
        </p>
      </footer>
    </div>

    <video id="input-video" playsinline muted></video>
    <audio id="game-audio" preload="auto" src="track.mp3"></audio>
  </body>
</html>
